{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bem-vindo \u00e0 Documenta\u00e7\u00e3o","text":"<p>Esta documenta\u00e7\u00e3o descreve como configurar e usar a infraestrutura com EKS na AWS.</p>"},{"location":"bottlenecks/","title":"Caching e Observabilidade","text":""},{"location":"bottlenecks/#caching-redis","title":"Caching (Redis)","text":"<p>In-memory databases s\u00e3o uma excelente forma de melhorar a performance da aplica\u00e7\u00e3o. Elas armazenam dados frequentemente acessados na mem\u00f3ria RAM, evitando consultas repetidas ao banco de dados relacional ou chamadas externas.</p>"},{"location":"bottlenecks/#por-que-usar","title":"Por que usar?","text":"<ul> <li>Redu\u00e7\u00e3o de lat\u00eancia: respostas mais r\u00e1pidas ao evitar recomputa\u00e7\u00f5es ou chamadas externas.</li> <li>Desacoplamento: separa o armazenamento tempor\u00e1rio da l\u00f3gica principal.</li> <li>Escalabilidade: alivia a carga do banco de dados relacional.</li> </ul>"},{"location":"bottlenecks/#tecnologias-utilizadas","title":"Tecnologias utilizadas","text":"<ul> <li>Redis: banco de dados in-memory amplamente utilizado.</li> <li>Pode ser acessado diretamente via cliente Redis em Python (ex: <code>redis-py</code>).</li> </ul>"},{"location":"bottlenecks/#exemplo-de-uso","title":"Exemplo de uso","text":"<ul> <li>Chave: <code>exchange:USD:EUR</code></li> <li>Valor: JSON com os dados de convers\u00e3o (<code>buy</code>, <code>sell</code>, <code>timestamp</code>)</li> <li>TTL: 5 minutos (ou outro valor adequado ao seu caso de uso)</li> </ul>"},{"location":"bottlenecks/#beneficios-adicionais","title":"Benef\u00edcios adicionais","text":"<ul> <li>Possibilidade de invalidar cache manualmente</li> <li>Cache distribu\u00eddo entre m\u00faltiplas inst\u00e2ncias</li> <li>Monitoramento de acertos e falhas de cache (cache hit/miss)</li> </ul>"},{"location":"bottlenecks/#observability-prometheus-grafana","title":"Observability (Prometheus + Grafana)","text":"<p>Observabilidade \u00e9 a capacidade de compreender o estado interno de um sistema com base em suas sa\u00eddas externas. \u00c9 essencial para diagn\u00f3stico de problemas e manuten\u00e7\u00e3o da confiabilidade.</p>"},{"location":"bottlenecks/#objetivos","title":"Objetivos","text":"<ul> <li>Monitorar tempo de resposta da API</li> <li>Detectar erros e falhas em tempo real</li> <li>Acompanhar uso de recursos (CPU, mem\u00f3ria, tr\u00e1fego)</li> </ul>"},{"location":"bottlenecks/#ferramentas-adotadas","title":"Ferramentas adotadas","text":"<ul> <li>Prometheus: coleta e armazena m\u00e9tricas.</li> <li>Grafana: visualiza essas m\u00e9tricas em dashboards interativos.</li> </ul>"},{"location":"bottlenecks/#metricas-expostas","title":"M\u00e9tricas expostas","text":"<ul> <li><code>http_requests_total</code>: total de requisi\u00e7\u00f5es por rota</li> <li><code>http_request_duration_seconds</code>: tempo m\u00e9dio de resposta</li> <li><code>http_cache_hits_total</code>: acertos no cache</li> <li><code>http_cache_misses_total</code>: falhas de cache</li> <li><code>python_gc_objects_collected_total</code>: objetos coletados pelo garbage collector</li> </ul>"},{"location":"exchange_api_documentation/","title":"Exchange API","text":""},{"location":"exchange_api_documentation/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A Exchange API \u00e9 um servi\u00e7o REST desenvolvido com FastAPI que permite a convers\u00e3o de valores entre diferentes moedas. Ela integra-se com uma API externa para obter as taxas de c\u00e2mbio em tempo real, fornecendo tanto a taxa de compra quanto de venda.</p> <p>A API \u00e9 parte de uma plataforma maior, sendo consumida atrav\u00e9s de um API Gateway, e requer autentica\u00e7\u00e3o para o uso.</p>"},{"location":"exchange_api_documentation/#endpoints","title":"Endpoints","text":""},{"location":"exchange_api_documentation/#get-exchangefromto","title":"<code>GET /exchange/{from}/{to}</code>","text":"<p>Consulta a taxa de c\u00e2mbio atual entre duas moedas espec\u00edficas.</p>"},{"location":"exchange_api_documentation/#parametros","title":"Par\u00e2metros:","text":"Par\u00e2metro Tipo Descri\u00e7\u00e3o <code>from</code> string C\u00f3digo da moeda de origem (ex: USD) <code>to</code> string C\u00f3digo da moeda de destino (ex: EUR)"},{"location":"exchange_api_documentation/#exemplo-de-requisicao","title":"Exemplo de Requisi\u00e7\u00e3o:","text":"<pre><code>GET /exchange/USD/EUR\nAuthorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"exchange_api_documentation/#exemplo-de-resposta","title":"Exemplo de Resposta:","text":"<pre><code>{\n    \"sell\": 0.82,\n    \"buy\": 0.80,\n    \"date\": \"2021-09-01 14:23:42\",\n    \"id-account\": \"0195ae95-5be7-7dd3-b35d-7a7d87c404fb\"\n}\n</code></pre>"},{"location":"exchange_api_documentation/#codigo-de-status","title":"C\u00f3digo de Status:","text":"<ul> <li><code>200 OK</code> \u2013 Resposta bem-sucedida com as taxas de c\u00e2mbio.</li> <li><code>401 Unauthorized</code> \u2013 Caso o usu\u00e1rio n\u00e3o esteja autenticado.</li> <li><code>500 Internal Server Error</code> \u2013 Falha na comunica\u00e7\u00e3o com a API externa ou outro erro interno.</li> </ul>"},{"location":"exchange_api_documentation/#integracao-com-api-externa","title":"Integra\u00e7\u00e3o com API Externa","text":"<p>A API consome dados de taxas de c\u00e2mbio de uma fonte externa. As APIs sugeridas para isso s\u00e3o:</p> <ul> <li>AwesomeAPI</li> <li>ExchangeRate-API</li> <li>Open Exchange Rates</li> <li>CurrencyLayer</li> </ul> <p>Dica: A biblioteca Python <code>requests</code> \u00e9 utilizada para fazer chamadas HTTP \u00e0 API de terceiros.</p>"},{"location":"exchange_api_documentation/#autenticacao","title":"Autentica\u00e7\u00e3o","text":"<p>Para utilizar esta API, o cliente precisa estar autenticado via JWT Token. O token \u00e9 validado pelo sistema de autentica\u00e7\u00e3o central da plataforma atrav\u00e9s do Gateway.</p> <p>Exemplo de uso no cabe\u00e7alho da requisi\u00e7\u00e3o:</p> <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"exchange_api_documentation/#codigo","title":"C\u00f3digo","text":"<pre><code>import os\nfrom fastapi import FastAPI, HTTPException, Query, Request\nimport httpx\n\napp = FastAPI(\n    title=\"Microservi\u00e7o Exchange\",\n    description=\"Microservi\u00e7o que consome dados da economy-api para obter cota\u00e7\u00f5es e realizar convers\u00f5es de moedas\",\n    version=\"1.0.0\"\n)\n\n@app.get(\"/coin/{moeda1}/{moeda2}\")\nasync def get_rate(moeda1: str, moeda2: str, request: Request):  # &lt;-- injeta Request\n\n    url = f\"https://economia.awesomeapi.com.br/last/{moeda1}-{moeda2}\"\n    print(f\"URL: {url}\")\n\n    try:\n        # 3) (Opcional) repassar algum header ao chamar a API externa\n        async with httpx.AsyncClient() as client:\n            response = await client.get(url)  # ou: headers={\"User-Agent\": user_agent}\n\n\n        if response.status_code != 200:\n            raise HTTPException(\n                status_code=500,\n                detail=\"Erro ao acessar a economy-api para a moeda solicitada.\"\n            )\n\n        data_json = response.json()\n        key = f\"{moeda1.upper()}{moeda2.upper()}\"\n        if key not in data_json:\n            raise HTTPException(status_code=500, detail=\"Chave de resposta n\u00e3o encontrada na API.\")\n\n        moeda_data = data_json[key]\n\n        return {\n            \"buy\": moeda_data.get(\"bid\"),\n            \"sell\": moeda_data.get(\"ask\"),\n            \"date\":   moeda_data.get(\"create_date\"),\n            \"id-account\": request.headers[\"id-account\"]  # &lt;-- repassa o header\n        }\n\n    except httpx.RequestError as exc:\n        raise HTTPException(status_code=500, detail=f\"Erro na requisi\u00e7\u00e3o: {exc}\")\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(\"main:app\", host=\"0.0.0.0\", port=8000, reload=True)\n</code></pre>"},{"location":"exchange_api_documentation/#arquitetura","title":"Arquitetura","text":"<p>A Exchange API faz parte de uma arquitetura modular com m\u00faltiplos servi\u00e7os integrados. Abaixo, um resumo da intera\u00e7\u00e3o entre os componentes:</p>"},{"location":"exchange_api_documentation/#fluxo-de-requisicao","title":"Fluxo de Requisi\u00e7\u00e3o:","text":"<pre><code>Usu\u00e1rio -&gt; Gateway -&gt; Exchange API -&gt; 3rd-Party API (Internet)\n</code></pre>"},{"location":"exchange_api_documentation/#componentes-envolvidos","title":"Componentes Envolvidos:","text":"<ul> <li>Gateway: Encaminha requisi\u00e7\u00f5es, aplica pol\u00edticas de seguran\u00e7a e autentica\u00e7\u00e3o.</li> <li>Auth Service: Respons\u00e1vel por autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o dos usu\u00e1rios.</li> <li>Account Service: Associa o <code>id-account</code> ao usu\u00e1rio autenticado.</li> <li>Exchange API: Realiza a convers\u00e3o de moedas e consulta externa.</li> <li>Banco de Dados: Pode ser utilizado para persistir logs ou hist\u00f3rico de convers\u00f5es (opcional).</li> <li>API Externa: Fonte de dados de c\u00e2mbio em tempo real.</li> </ul>"},{"location":"exchange_api_documentation/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Requisi\u00e7\u00f5es devem ser feitas via HTTPS.</li> <li>Autentica\u00e7\u00e3o obrigat\u00f3ria com token JWT.</li> <li>\u00c9 recomendado limitar o n\u00famero de requisi\u00e7\u00f5es por usu\u00e1rio (rate limit).</li> </ul>"},{"location":"exchange_api_documentation/#consideracoes-finais","title":"Considera\u00e7\u00f5es Finais","text":"<ul> <li>Este servi\u00e7o \u00e9 essencial para aplica\u00e7\u00f5es financeiras que demandam informa\u00e7\u00f5es de c\u00e2mbio atualizadas.</li> <li>A confiabilidade da API depende da disponibilidade da fonte de dados externa.</li> <li>A estrutura modular facilita a manuten\u00e7\u00e3o e escalabilidade do servi\u00e7o.</li> </ul>"},{"location":"jenkins_pipeline_documentation/","title":"Jenkins Pipeline","text":""},{"location":"jenkins_pipeline_documentation/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>Esta etapa do projeto define a automa\u00e7\u00e3o do deploy de microservi\u00e7os em um cluster Kubernetes utilizando Jenkins. A pipeline contempla as etapas de versionamento, build, empacotamento, publica\u00e7\u00e3o no Docker Hub e deploy em um cluster K8s.</p> <p>A automa\u00e7\u00e3o garante consist\u00eancia, reprodutibilidade e integra\u00e7\u00e3o cont\u00ednua entre os servi\u00e7os da aplica\u00e7\u00e3o.</p>"},{"location":"jenkins_pipeline_documentation/#estrutura-do-projeto","title":"Estrutura do Projeto","text":"<p>Todos os microservi\u00e7os devem conter um <code>Jenkinsfile</code> em seu respectivo diret\u00f3rio:</p> <pre><code>.\n\u251c\u2500\u2500 account-service\n\u2502   \u251c\u2500\u2500 Jenkinsfile\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 auth-service\n\u2502   \u251c\u2500\u2500 Jenkinsfile\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 gateway-service\n\u2502   \u251c\u2500\u2500 Jenkinsfile\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 product-service\n\u2502   \u251c\u2500\u2500 Jenkinsfile\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 order-service\n\u2502   \u251c\u2500\u2500 Jenkinsfile\n\u2502   \u2514\u2500\u2500 ...\n</code></pre> <p>O pipeline principal deve estar na raiz do projeto, orquestrando o deploy de todos os microservi\u00e7os no mesmo cluster Kubernetes.</p>"},{"location":"jenkins_pipeline_documentation/#etapas-do-pipeline","title":"Etapas do Pipeline","text":""},{"location":"jenkins_pipeline_documentation/#etapas-obrigatorias","title":"Etapas obrigat\u00f3rias:","text":"<ol> <li>SCM (Source Code Management) \u2013 Obt\u00e9m o c\u00f3digo mais recente do reposit\u00f3rio.</li> <li>Dependencies \u2013 Garante que depend\u00eancias do microservi\u00e7o estejam resolvidas.</li> <li>Build \u2013 Empacota o servi\u00e7o (ex: com Maven).</li> <li>Push to Docker Hub \u2013 Cria e envia a imagem para o Docker Hub.</li> <li>Deploy to K8s \u2013 Realiza o deploy da imagem no cluster Kubernetes.</li> </ol>"},{"location":"jenkins_pipeline_documentation/#exemplo-de-jenkinsfile-account-service","title":"Exemplo de Jenkinsfile \u2013 <code>account-service</code>","text":"<pre><code>pipeline {\n    agent any\n    environment {\n        SERVICE = 'account'\n        NAME = \"humbertosandmann/${env.SERVICE}\"\n    }\n    stages {\n        stage('Dependecies') {\n            steps {\n                build job: 'account', wait: true\n            }\n        }\n        stage('Build') { \n            steps {\n                sh 'mvn -B -DskipTests clean package'\n            }\n        }      \n        stage('Build &amp; Push Image') {\n            steps {\n                withCredentials([usernamePassword(credentialsId: 'dockerhub-credential', usernameVariable: 'USERNAME', passwordVariable: 'TOKEN')]) {\n                    sh \"docker login -u $USERNAME -p $TOKEN\"\n                    sh \"docker buildx create --use --platform=linux/arm64,linux/amd64 --node multi-platform-builder-${env.SERVICE} --name multi-platform-builder-${env.SERVICE}\"\n                    sh \"docker buildx build --platform=linux/arm64,linux/amd64 --push --tag ${env.NAME}:latest --tag ${env.NAME}:${env.BUILD_ID} -f Dockerfile .\"\n                    sh \"docker buildx rm --force multi-platform-builder-${env.SERVICE}\"\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"jenkins_pipeline_documentation/#jenkins","title":"Jenkins","text":""},{"location":"jenkins_pipeline_documentation/#observacoes","title":"Observa\u00e7\u00f5es","text":"<ul> <li>Todos os microservi\u00e7os devem ser enviados para o mesmo cluster Kubernetes.</li> <li>O uso do <code>docker buildx</code> permite builds multiplataforma.</li> <li>As credenciais Docker Hub devem estar configuradas no Jenkins (<code>dockerhub-credential</code>).</li> <li>Utilize <code>build job: 'servi\u00e7o'</code> para acionar builds dependentes.</li> </ul>"},{"location":"jenkins_pipeline_documentation/#requisitos","title":"Requisitos","text":"<ul> <li>Jenkins com plugins de Docker, Kubernetes e Git configurados.</li> <li>Credenciais seguras salvas no Jenkins.</li> <li>Acesso ao cluster K8s previamente configurado.</li> <li>Reposit\u00f3rio Git com estrutura de microservi\u00e7os.</li> </ul>"},{"location":"jenkins_pipeline_documentation/#consideracoes-finais","title":"Considera\u00e7\u00f5es Finais","text":"<ul> <li>Essa estrutura promove CI/CD eficiente e padronizado.</li> <li>Pode ser expandida com testes automatizados, lint, an\u00e1lise est\u00e1tica de c\u00f3digo e integra\u00e7\u00e3o com Prometheus/Grafana.</li> <li>Ajuda no versionamento controlado de imagens com o uso do <code>BUILD_ID</code>.</li> </ul>"},{"location":"minikube_k8s_documentation/","title":"Minikube &amp; Kubernetes Setup","text":""},{"location":"minikube_k8s_documentation/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>Esta etapa define como configurar o ambiente local com Kubernetes usando Minikube ou Kind para hospedar todos os microservi\u00e7os da aplica\u00e7\u00e3o em um \u00fanico cluster local.</p> <p>Todos os microservi\u00e7os devem ser configurados com recursos Kubernetes pr\u00f3prios, incluindo arquivos <code>k8s.yaml</code> contendo Secrets, ConfigMaps, Deployments e Services.</p>"},{"location":"minikube_k8s_documentation/#requisitos","title":"Requisitos","text":"<ul> <li>Minikube ou Kind instalado (ou Kubernetes via Docker Desktop com suporte habilitado).</li> <li>Docker instalado e configurado.</li> <li>Acesso a terminal com permiss\u00f5es de administrador.</li> <li>Arquivos <code>k8s.yaml</code> de cada microservi\u00e7o na estrutura do projeto.</li> </ul>"},{"location":"minikube_k8s_documentation/#estrutura-do-projeto","title":"Estrutura do Projeto","text":"<p>Cada microservi\u00e7o deve conter seus arquivos de configura\u00e7\u00e3o no seguinte formato:</p> <pre><code>\ud83d\udcc1 api/\n\u2514\u2500\u2500 \ud83d\udcc1 account-service/\n    \u2514\u2500\u2500 \ud83d\udcc1 k8s/\n        \u2514\u2500\u2500 \ud83d\udcc4 k8s.yaml\n\u2514\u2500\u2500 \ud83d\udcc1 auth-service/\n    \u2514\u2500\u2500 \ud83d\udcc1 k8s/\n        \u2514\u2500\u2500 \ud83d\udcc4 k8s.yaml\n\u2514\u2500\u2500 \ud83d\udcc1 gateway-service/\n    \u2514\u2500\u2500 \ud83d\udcc1 k8s/\n        \u2514\u2500\u2500 \ud83d\udcc4 k8s.yaml\n\u2514\u2500\u2500 \ud83d\udcc1 product-service/\n    \u2514\u2500\u2500 \ud83d\udcc1 k8s/\n        \u2514\u2500\u2500 \ud83d\udcc4 k8s.yaml\n\u2514\u2500\u2500 \ud83d\udcc1 order-service/\n    \u2514\u2500\u2500 \ud83d\udcc1 k8s/\n        \u2514\u2500\u2500 \ud83d\udcc4 k8s.yaml\n</code></pre>"},{"location":"minikube_k8s_documentation/#recursos-obrigatorios-em-cada-k8syaml","title":"Recursos Obrigat\u00f3rios em Cada <code>k8s.yaml</code>","text":"<p>Cada arquivo de configura\u00e7\u00e3o Kubernetes (<code>k8s.yaml</code>) deve conter os seguintes recursos:</p> <ul> <li>Secret \u2013 Para credenciais e vari\u00e1veis sens\u00edveis.</li> <li>ConfigMap \u2013 Para vari\u00e1veis de ambiente e configura\u00e7\u00f5es de aplica\u00e7\u00e3o.</li> <li>Deployment \u2013 Define como o pod ser\u00e1 criado.</li> <li>Service \u2013 Exp\u00f5e o microservi\u00e7o para dentro do cluster.</li> </ul>"},{"location":"minikube_k8s_documentation/#comandos-uteis","title":"Comandos \u00dateis","text":""},{"location":"minikube_k8s_documentation/#iniciar-o-minikube","title":"Iniciar o Minikube:","text":"<pre><code>minikube start\n</code></pre>"},{"location":"minikube_k8s_documentation/#aplicar-os-arquivos-de-configuracao","title":"Aplicar os arquivos de configura\u00e7\u00e3o:","text":"<pre><code>kubectl apply -f account-service/k8s/k8s.yaml\nkubectl apply -f auth-service/k8s/k8s.yaml\nkubectl apply -f gateway-service/k8s/k8s.yaml\nkubectl apply -f product-service/k8s/k8s.yaml\nkubectl apply -f order-service/k8s/k8s.yaml\n</code></pre>"},{"location":"minikube_k8s_documentation/#verificar-se-os-servicos-estao-rodando","title":"Verificar se os servi\u00e7os est\u00e3o rodando:","text":"<pre><code>kubectl get all\n</code></pre>"},{"location":"minikube_k8s_documentation/#validacao","title":"Valida\u00e7\u00e3o","text":"<p>Para validar que todos os servi\u00e7os est\u00e3o rodando no mesmo cluster, grave um v\u00eddeo mostrando os comandos abaixo:</p> <pre><code>kubectl config current-context\nkubectl get pods\nkubectl get services\n</code></pre> <p>Confirme que os pods de todos os servi\u00e7os est\u00e3o ativos e com status <code>Running</code>.</p> <p></p>"},{"location":"minikube_k8s_documentation/#alternativas","title":"Alternativas","text":"<p>Se desejar usar um provedor de nuvem em vez de local:</p> <ul> <li>AWS EKS</li> <li>Azure AKS</li> <li>Google GKE</li> </ul> <p>Certifique-se de que o cluster na nuvem tamb\u00e9m esteja configurado com o mesmo conjunto de arquivos <code>k8s.yaml</code>.</p>"},{"location":"minikube_k8s_documentation/#consideracoes-finais","title":"Considera\u00e7\u00f5es Finais","text":"<ul> <li>Utilizar um cluster unificado facilita o desenvolvimento e testes locais.</li> <li>Toda a configura\u00e7\u00e3o de Kubernetes deve ser mantida versionada no reposit\u00f3rio.</li> <li>\u00c9 poss\u00edvel configurar ingress controller para expor m\u00faltiplos servi\u00e7os via um \u00fanico IP externo (opcional).</li> </ul>"},{"location":"order_api_documentation/","title":"Order API","text":""},{"location":"order_api_documentation/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A Order API \u00e9 respons\u00e1vel por gerenciar os pedidos de usu\u00e1rios na plataforma. Esta API permite a cria\u00e7\u00e3o de novos pedidos, listagem de todos os pedidos do usu\u00e1rio atual e visualiza\u00e7\u00e3o dos detalhes de pedidos espec\u00edficos.</p> <p>Todas as requisi\u00e7\u00f5es exigem autentica\u00e7\u00e3o por JWT Token, sendo consumidas exclusivamente via API Gateway.</p>"},{"location":"order_api_documentation/#endpoints-de-pedido","title":"Endpoints de Pedido","text":""},{"location":"order_api_documentation/#post-order","title":"<code>POST /order</code>","text":"<p>Cria um novo pedido para o usu\u00e1rio autenticado.</p>"},{"location":"order_api_documentation/#requisicao","title":"Requisi\u00e7\u00e3o:","text":"<pre><code>{\n    \"items\": [\n        {\n            \"idProduct\": \"0195abfb-7074-73a9-9d26-b4b9fbaab0a8\",\n            \"quantity\": 2\n        },\n        {\n            \"idProduct\": \"0195abfe-e416-7052-be3b-27cdaf12a984\",\n            \"quantity\": 1\n        }\n    ]\n}\n</code></pre>"},{"location":"order_api_documentation/#resposta","title":"Resposta:","text":"<ul> <li><code>201 Created</code> \u2013 Pedido criado com sucesso.</li> <li><code>400 Bad Request</code> \u2013 Dados inv\u00e1lidos.</li> </ul>"},{"location":"order_api_documentation/#get-order","title":"<code>GET /order</code>","text":"<p>Retorna todos os pedidos do usu\u00e1rio autenticado.</p>"},{"location":"order_api_documentation/#resposta_1","title":"Resposta:","text":"<pre><code>[\n    {\n        \"id\": \"0195ac33-73e5-7cb3-90ca-7b5e7e549569\",\n        \"date\": \"2025-09-01T12:30:00\",\n        \"total\": 26.44\n    },\n    {\n        \"id\": \"0195ac33-cbbd-7a6e-a15b-b85402cf143f\",\n        \"date\": \"2025-10-09T03:21:57\",\n        \"total\": 18.6\n    }\n]\n</code></pre> <ul> <li><code>200 OK</code></li> </ul>"},{"location":"order_api_documentation/#get-orderid","title":"<code>GET /order/{id}</code>","text":"<p>Retorna os detalhes de um pedido espec\u00edfico. O pedido deve pertencer ao usu\u00e1rio autenticado.</p>"},{"location":"order_api_documentation/#resposta_2","title":"Resposta:","text":"<pre><code>{\n    \"id\": \"0195ac33-73e5-7cb3-90ca-7b5e7e549569\",\n    \"date\": \"2025-09-01T12:30:00\",\n    \"items\": [\n        {\n            \"id\": \"01961b9a-bca2-78c4-9be1-7092b261f217\",\n            \"product\": {\n                \"id\": \"0195abfb-7074-73a9-9d26-b4b9fbaab0a8\"\n            },\n            \"quantity\": 2,\n            \"total\": 20.24\n        },\n        {\n            \"id\": \"01961b9b-08fd-76a5-8508-cdb6cd5c27ab\",\n            \"product\": {\n                \"id\": \"0195abfe-e416-7052-be3b-27cdaf12a984\"\n            },\n            \"quantity\": 10,\n            \"total\": 6.2\n        }\n    ],\n    \"total\": 26.44\n}\n</code></pre> <ul> <li><code>200 OK</code> \u2013 Pedido encontrado.</li> <li><code>404 Not Found</code> \u2013 Pedido n\u00e3o pertence ao usu\u00e1rio ou n\u00e3o existe.</li> </ul>"},{"location":"order_api_documentation/#funcionalidades-adicionais","title":"Funcionalidades Adicionais","text":"<p>Funcionalidades extras recomendadas incluem:</p> <ul> <li>Valida\u00e7\u00f5es de entrada robustas.</li> <li>Autoriza\u00e7\u00e3o por papel:</li> <li><code>admin</code>: pode gerenciar produtos.</li> <li><code>user</code>: pode apenas criar e consultar pedidos.</li> <li>Tratamento de erros com mensagens apropriadas.</li> <li>Busca de produtos por nome (relevante para interfaces de pedidos).</li> </ul>"},{"location":"order_api_documentation/#integracao-com-a-plataforma","title":"Integra\u00e7\u00e3o com a Plataforma","text":""},{"location":"order_api_documentation/#fluxo-de-requisicao","title":"Fluxo de Requisi\u00e7\u00e3o:","text":"<pre><code>Usu\u00e1rio \u2192 Gateway \u2192 Order API \u2192 Banco de Dados\n</code></pre>"},{"location":"order_api_documentation/#componentes-envolvidos","title":"Componentes Envolvidos:","text":"<ul> <li>Gateway: Encaminha e autentica as requisi\u00e7\u00f5es.</li> <li>Auth Service: Valida tokens e autoriza a\u00e7\u00f5es.</li> <li>Order API: Processa e gerencia os pedidos.</li> <li>Banco de Dados: Persist\u00eancia dos pedidos e itens.</li> <li>Product API: Utilizada para validar produtos nos pedidos.</li> </ul>"},{"location":"order_api_documentation/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Requisi\u00e7\u00f5es via HTTPS.</li> <li>JWT Token obrigat\u00f3rio no header.</li> <li>Valida\u00e7\u00e3o de propriedade do pedido (<code>order.user_id == authenticated_user.id</code>).</li> </ul>"},{"location":"order_api_documentation/#observabilidade-nice-to-have","title":"Observabilidade (Nice to Have)","text":"<p>Sugest\u00f5es de boas pr\u00e1ticas:</p> <ul> <li>Logs estruturados por pedido.</li> <li>M\u00e9tricas com Prometheus.</li> <li>Pain\u00e9is de monitoramento com Grafana.</li> <li>Swagger/OpenAPI com SpringDoc ou FastAPI Docs.</li> </ul>"},{"location":"order_api_documentation/#consideracoes-finais","title":"Considera\u00e7\u00f5es Finais","text":"<ul> <li>O modelo de autoriza\u00e7\u00e3o garante que apenas o dono do pedido possa visualiz\u00e1-lo.</li> <li>A Order API deve ser extens\u00edvel para lidar com diferentes formas de pagamento no futuro.</li> <li>Ideal para compor microservi\u00e7os orientados a dom\u00ednio em uma arquitetura distribu\u00edda.</li> </ul>"},{"location":"product_api_documentation/","title":"Product API","text":""},{"location":"product_api_documentation/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A Product API \u00e9 um servi\u00e7o REST que faz parte de uma plataforma de loja virtual. Esta API permite a gest\u00e3o de produtos e pedidos (orders), estando integrada ao restante da infraestrutura por meio de um API Gateway e sistema de autentica\u00e7\u00e3o.</p> <p>Todas as requisi\u00e7\u00f5es exigem autentica\u00e7\u00e3o via JWT.</p>"},{"location":"product_api_documentation/#endpoints-de-produto","title":"Endpoints de Produto","text":""},{"location":"product_api_documentation/#post-product","title":"<code>POST /product</code>","text":"<p>Cria um novo produto.</p>"},{"location":"product_api_documentation/#requisicao","title":"Requisi\u00e7\u00e3o:","text":"<pre><code>{\n    \"name\": \"Tomato\",\n    \"price\": 10.12,\n    \"unit\": \"kg\"\n}\n</code></pre>"},{"location":"product_api_documentation/#resposta","title":"Resposta:","text":"<ul> <li><code>201 Created</code> \u2013 Produto criado com sucesso.</li> <li><code>400 Bad Request</code> \u2013 Dados inv\u00e1lidos.</li> </ul>"},{"location":"product_api_documentation/#get-product","title":"<code>GET /product</code>","text":"<p>Retorna todos os produtos cadastrados.</p>"},{"location":"product_api_documentation/#resposta_1","title":"Resposta:","text":"<pre><code>[\n    {\n        \"id\": \"0195abfb-7074-73a9-9d26-b4b9fbaab0a8\",\n        \"name\": \"Tomato\",\n        \"price\": 10.12,\n        \"unit\": \"kg\"\n    },\n    {\n        \"id\": \"0195abfe-e416-7052-be3b-27cdaf12a984\",\n        \"name\": \"Cheese\",\n        \"price\": 0.62,\n        \"unit\": \"slice\"\n    }\n]\n</code></pre> <ul> <li><code>200 OK</code></li> </ul>"},{"location":"product_api_documentation/#get-productid","title":"<code>GET /product/{id}</code>","text":"<p>Busca um produto pelo seu ID.</p>"},{"location":"product_api_documentation/#resposta_2","title":"Resposta:","text":"<pre><code>{\n    \"id\": \"0195abfb-7074-73a9-9d26-b4b9fbaab0a8\",\n    \"name\": \"Tomato\",\n    \"price\": 10.12,\n    \"unit\": \"kg\"\n}\n</code></pre> <ul> <li><code>200 OK</code> \u2013 Produto encontrado.</li> <li><code>404 Not Found</code> \u2013 Produto n\u00e3o encontrado.</li> </ul>"},{"location":"product_api_documentation/#delete-productid","title":"<code>DELETE /product/{id}</code>","text":"<p>Remove um produto pelo seu ID.</p> <ul> <li><code>204 No Content</code> \u2013 Produto deletado com sucesso.</li> <li><code>404 Not Found</code> \u2013 Produto n\u00e3o encontrado.</li> </ul>"},{"location":"product_api_documentation/#funcionalidades-adicionais","title":"Funcionalidades Adicionais","text":"<p>A API pode ser expandida com os seguintes recursos:</p> <ul> <li>Busca por nome com filtro \"like\".</li> <li>Autoriza\u00e7\u00e3o por papel:</li> <li><code>admin</code>: pode criar, atualizar e deletar produtos.</li> <li><code>user</code>: pode apenas criar pedidos.</li> <li>Valida\u00e7\u00f5es de entrada para garantir dados corretos.</li> <li>Tratamento de erros com mensagens claras.</li> </ul>"},{"location":"product_api_documentation/#integracao-com-a-plataforma","title":"Integra\u00e7\u00e3o com a Plataforma","text":""},{"location":"product_api_documentation/#fluxo","title":"Fluxo:","text":"<pre><code>Usu\u00e1rio \u2192 Gateway \u2192 Product API \u2192 Banco de Dados\n</code></pre>"},{"location":"product_api_documentation/#componentes-envolvidos","title":"Componentes Envolvidos:","text":"<ul> <li>Gateway \u2013 Repassa requisi\u00e7\u00f5es e autentica o token JWT.</li> <li>Auth Service \u2013 Servi\u00e7o de autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o.</li> <li>Account Service \u2013 Gest\u00e3o de identidade do usu\u00e1rio.</li> <li>Banco de Dados \u2013 Persist\u00eancia dos produtos e pedidos.</li> <li>API Externa \u2013 (opcional, para integra\u00e7\u00e3o com cat\u00e1logos ou ERP externos).</li> </ul>"},{"location":"product_api_documentation/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Requisi\u00e7\u00f5es HTTPS obrigat\u00f3rias.</li> <li>Autentica\u00e7\u00e3o JWT.</li> <li>Autoriza\u00e7\u00e3o baseada em fun\u00e7\u00e3o do usu\u00e1rio (admin/user).</li> </ul>"},{"location":"product_api_documentation/#observabilidade-nice-to-have","title":"Observabilidade (Nice to Have)","text":"<p>Recomenda-se implementar:</p> <ul> <li>Logs estruturados.</li> <li>M\u00e9tricas com Prometheus.</li> <li>Visualiza\u00e7\u00e3o com Grafana.</li> </ul>"},{"location":"product_api_documentation/#recomendacao-tecnica","title":"Recomenda\u00e7\u00e3o T\u00e9cnica","text":"<ul> <li>Utilizar Redis como banco em mem\u00f3ria para microservi\u00e7o de produto.</li> <li>Gerar documenta\u00e7\u00e3o autom\u00e1tica com Swagger via SpringDoc ou equivalente (se Java).</li> <li>Aplicar testes de integra\u00e7\u00e3o com mocks de autentica\u00e7\u00e3o e banco.</li> </ul>"}]}